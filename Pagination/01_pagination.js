


// const products = localStorage.getItem('listproducts');

// var listproducts = JSON.parse(listproducts);


// const listproducts = [
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
//     {imagine: "https://media-cdn.laodong.vn/storage/newsportal/2019/4/2/666476/Mazda-Cx5.jpg?w=414&h=276&crop=auto&scale=both", nameproduct: "Oto", percent: 2500, price: 2900},
// ];

let product = localStorage.getItem('listproducts')

let listproducts = JSON.parse(product);

let perPage = 8;
let currentPage = 1;
let start = 0;
let end = perPage;

const totalPage = Math.ceil(listproducts.length / perPage);

const btnNext = document.querySelector('.btn-next');
const btnPrev = document.querySelector('.btn-previous');

function getCurrentPage(currentPage) {
    start = (currentPage - 1) * perPage;
    end = currentPage * perPage;
}

function renderProduct() {
    html = '';
    const content = listproducts.map((item, index) => {
        if (index >= start && index < end) {
            html += '<div class="product-recents--bike_sibarone">';
            html +=     '<img src="' + item.imagine +'" alt="bike1" class="recents-img">';
            html +=     '<div id="product-recents--bike_inform">';
            html +=         '<p>' + item.nameproduct + '</p>';
            html +=         '<div id="product-recents--bike_inform__price"><del>$' + item.percent + '</del><br>$' + item.price + '</div>';
            html +=     '</div>';
            html +=     '<a href="#" class="add-cart cart1">Add to cart</a>'
            html += '</div>';
            return html;
        }
    });

    document.getElementById('product-recents--bike').innerHTML = html;
}

renderProduct();

function renderListPage() {
    let html = '';
    html += `<button class="active">${1}</button>`;
    for (let i = 2; i <= totalPage; i++) {
        html += `<button>${i}</button>`;
    }
    document.getElementById('number-page').innerHTML = html;
}
renderListPage();

function changePage() {
    const currentPages = document.querySelectorAll('#number-page button');
    for (let i = 0; i < currentPages.length; i++) {
        currentPages[i].addEventListener('click', () => {
            const value = i + 1;
            currentPage = value;
            getCurrentPage(currentPage);
            renderProduct();
        });
    }
}
changePage();

btnNext.addEventListener('click', () =>{
    currentPage++;
    if (currentPage > totalPage) {
        currentPage = totalPage;
    }

    getCurrentPage(currentPage)
    renderProduct();
});

btnPrev.addEventListener('click', () =>{
    currentPage--;
    if (currentPage <= 1) {
        currentPage = 1;
    } 
    getCurrentPage(currentPage)
    renderProduct();
});

